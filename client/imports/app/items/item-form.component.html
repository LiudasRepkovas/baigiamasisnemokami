<mat-card class="form-center">
  <h2 *ngIf="!item">Naujas skelbimas</h2>
  <h2 *ngIf="item">Atnaujinti skelbimą</h2>
  <form *ngIf="!loading && user" [formGroup]="addForm" (ngSubmit)="addItem(); upload.reset(); resetImages();" (keydown.enter)="$event.preventDefault()">
    <div>
        <mat-form-field>   
        <input matInput dividerColor="accent" formControlName="name" placeholder="Pavadinimas">
      </mat-form-field>
    </div>
    <div>
        <mat-form-field>
            
        <textarea autosize mat-input  rows="2" dividerColor="accent" formControlName="description" placeholder="Aprašymas">
        </mat-form-field>
    </div>
    <div>
        <mat-form-field floatingPlaceholder="false">
        <input matInput type="text" formControlName="location" id="autocomplete" #autocomplete placeholder="Adresas"/> 
      </mat-input-container>
    </div>
    <div>
      <mat-select floatingPlaceholder="false" formControlName="category" placeholder="Kategorija">
        <mat-option *ngFor="let cat of categories|async" [value]="cat._id">{{cat.name}}</mat-option>
      </mat-select>
    </div>
    <image-upload #upload (onFile)="onImage($event)"></image-upload>
    <div *ngIf="images && images.length > 0" class="item-photos">
        <div *ngFor="let image of images;let i = index" class="small-image-wrapper">
            <img (click)="removeImage(i)" class="swiper-image" [src]="getImageUrl(image)">
        </div>
    </div>
    
    <div style="text-align:center">
      <button mat-button color="accent"-raised-button type="submit">Išsaugoti skelbimą!</button	>
    </div>
  </form>
  <div *ngIf="!user">
    Norėdami sukurti skelbimą privalote prisijungti!
  </div>
  <div *ngIf="item && item?.owner != user?._id && !user?.profile?.admin">
    Negalite keisti ne savo skelbimo!
  </div>
  <mat-spinner *ngIf="loading" class="preloader-wrapper big active"></mat-spinner>
</mat-card>
